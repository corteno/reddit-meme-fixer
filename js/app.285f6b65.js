(function(t){function e(e){for(var a,o,l=e[0],s=e[1],c=e[2],h=0,d=[];h<l.length;h++)o=l[h],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&d.push(r[o][0]),r[o]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a]);u&&u(e);while(d.length)d.shift()();return n.push.apply(n,c||[]),i()}function i(){for(var t,e=0;e<n.length;e++){for(var i=n[e],a=!0,l=1;l<i.length;l++){var s=i[l];0!==r[s]&&(a=!1)}a&&(n.splice(e--,1),t=o(o.s=i[0]))}return t}var a={},r={app:0},n=[];function o(e){if(a[e])return a[e].exports;var i=a[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=a,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(i,a,function(e){return t[e]}.bind(null,a));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],s=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var u=s;n.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"034f":function(t,e,i){"use strict";var a=i("85ec"),r=i.n(a);r.a},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var a=i("2b0e"),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("Home")],1)},n=[],o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"home-wrapper"},[i("h1",{staticClass:"page-title"},[t._v("Reddit Title Fixer")]),i("div",{staticClass:"page-content"},[i("h2",{staticClass:"page-subtitle"},[t._v(" Don't you hate when the punchline of a meme is in the title and can't link it to your friends? Fear no more, just paste the link and you'll get your meme back! ")]),i("div",{staticClass:"form-wrapper"},[i("form",{staticClass:"form",on:{submit:t.onSubmit}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.inputValue,expression:"inputValue"}],class:""!==this.value?"text-input active-text-input":"text-input",attrs:{type:"text"},domProps:{value:t.inputValue},on:{input:function(e){e.target.composing||(t.inputValue=e.target.value)}}}),i("label",{staticClass:"row",attrs:{for:"title-lightmode",title:"Switches the title background to white and the text to black"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.lightMode,expression:"lightMode"}],staticClass:"checkbox",attrs:{type:"checkbox",id:"title-lightmode"},domProps:{checked:Array.isArray(t.lightMode)?t._i(t.lightMode,null)>-1:t.lightMode},on:{change:function(e){var i=t.lightMode,a=e.target,r=!!a.checked;if(Array.isArray(i)){var n=null,o=t._i(i,n);a.checked?o<0&&(t.lightMode=i.concat([n])):o>-1&&(t.lightMode=i.slice(0,o).concat(i.slice(o+1)))}else t.lightMode=r}}}),i("p",[t._v("Title light mode")])]),t.isLoading?t._e():i("input",{class:"submit-button",attrs:{type:"submit",value:"Submit",disabled:""===this.value}}),t.isLoading?i("div",{staticClass:"lds-dual-ring"}):t._e()]),i("p",{staticClass:"error-message"},[t._v(t._s(this.errorMessage))])]),i("Canvas",{ref:"canvas",attrs:{width:"600",height:"600"}}),i("img",{ref:"img",staticClass:"meme-img",attrs:{src:"",alt:""}})],1),i("footer",[i("p",[t._v(" Made by "),i("a",{attrs:{href:"http://borsodidavid.com"}},[t._v("Dávid Borsodi")]),t._v(" © "+t._s((new Date).getFullYear())+" ")])])])},l=[],s=(i("c975"),i("13d5"),i("fb6a"),i("4d63"),i("ac1f"),i("25f0"),i("1276"),i("498a"),i("2340")),c=i.n(s),u=i("bc3a"),h=i.n(u),d={name:"Home",computed:{inputValue:{get:function(){return this.value},set:function(t){this.value=t}}},data:function(){return{value:"",errorMessage:"",textBlockHeight:33,characterLimitPerLine:"55",isLoading:!1,lightMode:!1}},methods:{onSubmit:function(t){var e=this;if(t.preventDefault(),this.validateUrl(this.value)){var i=this.value+".json";h.a.post("https://reddit-meme-fixer.herokuapp.com/meme",{data:i}).then((function(t){e.displayOnCanvas(t.data)})),this.isLoading=!0}},displayOnCanvas:function(t){var e=this,i=this.$refs.canvas,a=i.getContext("2d"),r=new Image;r.src=t.img,r.onload=function(){if(a.canvas.width=r.width,t.title.length>e.characterLimitPerLine){var n=e.insertLineBreak(t.title);a.canvas.height=r.height+e.textBlockHeight*n.length,a.drawImage(r,0,e.textBlockHeight*n.length),a.fillStyle=e.lightMode?"white":"black",a.fillRect(0,0,r.width,e.textBlockHeight*n.length),a.font="26px Arial",a.fillStyle=e.lightMode?"black":"white";for(var o=0;o<n.length;o++)a.fillText(n[o],10,30*(o+1))}else a.canvas.height=r.height+2*e.textBlockHeight,a.drawImage(r,0,2*e.textBlockHeight),a.fillStyle=e.lightMode?"white":"black",a.fillRect(0,0,r.width,2*e.textBlockHeight),a.font="26px Arial",a.fillStyle=e.lightMode?"black":"white",a.fillText(t.title,10,45);e.isLoading=!1,e.value="",e.$refs.img.src=i.toDataURL()},r.src=t.img},getSpaces:function(t){for(var e=[],i=0;i<t.length;i++)" "===t[i]&&e.push(i);return e},insertLineBreak:function(t){for(var e=this,i=Math.ceil(t.length/this.characterLimitPerLine),a=t,r=[],n=0;n<i;n++){var o=this.getSpaces(a),l=o.reduce((function(t,i){return Math.abs(i-e.characterLimitPerLine)<Math.abs(t-e.characterLimitPerLine)?i:t}));if(a.length>=this.characterLimitPerLine){var s=a.slice(0,l+1);s=s.trim(),r.push(s),a=a.substring(l+1,a.length)}else r.push(a)}return r},setErrorMessage:function(t){var e=this;this.errorMessage=t,setTimeout((function(){e.errorMessage=""}),5e3)},validateUrl:function(t){var e=new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i"),i=!!e.test(t);if(i){var a=c.a.get(this.extractHostName(t));if("reddit.com"===a||"old.reddit.com"===a)return!0}return this.setErrorMessage("Invalid URL, can only fetch memes from reddit.com"),!1},extractHostName:function(t){var e;return e=t.indexOf("//")>-1?t.split("/")[2]:t.split("/")[0],e=e.split(":")[0],e=e.split("?")[0],e}}},f=d,p=(i("8b71"),i("2877")),g=Object(p["a"])(f,o,l,!1,null,null,null),m=g.exports,v={name:"App",components:{Home:m}},b=v,y=(i("034f"),Object(p["a"])(b,r,n,!1,null,null,null)),x=y.exports,w=i("4ae6"),M=i.n(w);a["a"].use(M.a),a["a"].config.productionTip=!1,new a["a"]({render:function(t){return t(x)}}).$mount("#app")},"85ec":function(t,e,i){},"88d7":function(t,e,i){},"8b71":function(t,e,i){"use strict";var a=i("88d7"),r=i.n(a);r.a}});
//# sourceMappingURL=app.285f6b65.js.map