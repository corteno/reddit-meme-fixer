(function(t){function e(e){for(var n,s,o=e[0],l=e[1],u=e[2],h=0,d=[];h<o.length;h++)s=o[h],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&d.push(a[s][0]),a[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);c&&c(e);while(d.length)d.shift()();return r.push.apply(r,u||[]),i()}function i(){for(var t,e=0;e<r.length;e++){for(var i=r[e],n=!0,o=1;o<i.length;o++){var l=i[o];0!==a[l]&&(n=!1)}n&&(r.splice(e--,1),t=s(s.s=i[0]))}return t}var n={},a={app:0},r=[];function s(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=n,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var c=l;r.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"034f":function(t,e,i){"use strict";var n=i("85ec"),a=i.n(n);a.a},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("2b0e"),a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("Home")],1)},r=[],s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"home-wrapper"},[i("h1",{staticClass:"page-title"},[t._v("Reddit Title Fixer")]),i("div",{staticClass:"page-content"},[i("h2",{staticClass:"page-subtitle"},[t._v(" Don't you hate when the punchline of a meme is in the title and can't link it to your friends? Fear no more, just paste the link and you'll get your meme back! ")]),i("div",{staticClass:"form-wrapper"},[i("form",{staticClass:"form",on:{submit:t.onSubmit}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.inputValue,expression:"inputValue"}],class:""!==this.value?"text-input active-text-input":"text-input",attrs:{type:"text"},domProps:{value:t.inputValue},on:{input:function(e){e.target.composing||(t.inputValue=e.target.value)}}}),t.isLoading?t._e():i("input",{class:"submit-button",attrs:{type:"submit",value:"Submit",disabled:""===this.value}}),t.isLoading?i("div",{staticClass:"lds-dual-ring"}):t._e()]),i("p",{staticClass:"error-message"},[t._v(t._s(this.errorMessage))])]),i("Canvas",{ref:"canvas",attrs:{width:"600",height:"600"}}),i("img",{ref:"img",staticClass:"meme-img",attrs:{src:"",alt:""}})],1),i("footer",[i("p",[t._v(" Made by "),i("a",{attrs:{href:"http://borsodidavid.com"}},[t._v("Dávid Borsodi")]),t._v(" © "+t._s((new Date).getFullYear())+" ")])])])},o=[],l=(i("c975"),i("13d5"),i("fb6a"),i("4d63"),i("ac1f"),i("25f0"),i("1276"),i("498a"),i("2340")),u=i.n(l),c=i("bc3a"),h=i.n(c),d={name:"Home",computed:{inputValue:{get:function(){return this.value},set:function(t){this.value=t}}},data:function(){return{value:"",errorMessage:"",textBlockHeight:33,characterLimitPerLine:"55",isLoading:!1}},methods:{onSubmit:function(t){var e=this;if(t.preventDefault(),this.validateUrl(this.value)){var i=this.value+".json";h.a.post("https://reddit-meme-fixer.herokuapp.com/meme",{data:i}).then((function(t){e.displayOnCanvas(t.data)})),this.isLoading=!0}},displayOnCanvas:function(t){var e=this,i=this.$refs.canvas,n=i.getContext("2d"),a=new Image;a.src=t.img,a.onload=function(){if(n.canvas.width=a.width,t.title.length>e.characterLimitPerLine){var r=e.insertLineBreak(t.title);n.canvas.height=a.height+e.textBlockHeight*r.length,n.drawImage(a,0,e.textBlockHeight*r.length),n.fillRect(0,0,a.width,e.textBlockHeight*r.length),n.font="26px Arial",n.fillStyle="white";for(var s=0;s<r.length;s++)n.fillText(r[s],10,30*(s+1))}else n.canvas.height=a.height+2*e.textBlockHeight,n.drawImage(a,0,2*e.textBlockHeight),n.fillRect(0,0,a.width,2*e.textBlockHeight),n.font="26px Arial",n.fillStyle="white",n.fillText(t.title,10,45);e.isLoading=!1,e.value="",e.$refs.img.src=i.toDataURL()},a.src=t.img},getSpaces:function(t){for(var e=[],i=0;i<t.length;i++)" "===t[i]&&e.push(i);return e},insertLineBreak:function(t){for(var e=this,i=Math.ceil(t.length/this.characterLimitPerLine),n=t,a=[],r=0;r<i;r++){var s=this.getSpaces(n),o=s.reduce((function(t,i){return Math.abs(i-e.characterLimitPerLine)<Math.abs(t-e.characterLimitPerLine)?i:t}));if(n.length>=this.characterLimitPerLine){var l=n.slice(0,o+1);l=l.trim(),a.push(l),n=n.substring(o+1,n.length)}else a.push(n)}return a},setErrorMessage:function(t){var e=this;this.errorMessage=t,setTimeout((function(){e.errorMessage=""}),5e3)},validateUrl:function(t){var e=new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i"),i=!!e.test(t);if(i){var n=u.a.get(this.extractHostName(t));if("reddit.com"===n||"old.reddit.com"===n)return!0}return this.setErrorMessage("Invalid URL, can only fetch memes from reddit.com"),!1},extractHostName:function(t){var e;return e=t.indexOf("//")>-1?t.split("/")[2]:t.split("/")[0],e=e.split(":")[0],e=e.split("?")[0],e}}},f=d,p=(i("8b71"),i("2877")),v=Object(p["a"])(f,s,o,!1,null,null,null),m=v.exports,g={name:"App",components:{Home:m}},b=g,x=(i("034f"),Object(p["a"])(b,a,r,!1,null,null,null)),y=x.exports,w=i("4ae6"),_=i.n(w);n["a"].use(_.a),n["a"].config.productionTip=!1,new n["a"]({render:function(t){return t(y)}}).$mount("#app")},"85ec":function(t,e,i){},"88d7":function(t,e,i){},"8b71":function(t,e,i){"use strict";var n=i("88d7"),a=i.n(n);a.a}});
//# sourceMappingURL=app.2b2a4ad2.js.map